<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <link rel="icon" type="image/svg+xml" href="/vite.svg" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Brepub - Continuous Reader</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Source+Serif+4:opsz,wght@8..60,400;8..60,500;8..60,600&display=swap"
    rel="stylesheet">
</head>

<body>
  <div id="app">
    <header class="app-header">
      <div class="logo">Brepub</div>
      <div class="actions">
        <label for="epub-upload" class="btn btn-primary">
          Upload EPUB
          <input type="file" id="epub-upload" accept=".epub" hidden />
        </label>
        <button id="toggle-sidebar" class="btn btn-secondary">Chapters</button>
        <button id="toggle-settings" class="btn btn-secondary">Settings</button>

      </div>
    </header>

    <main class="reader-container">
      <aside id="sidebar" class="sidebar hidden">
        <div id="toc-header" class="sidebar-header">
          <h3>Table of Contents</h3>
        </div>
        <ul id="toc"></ul>
      </aside>

      <div id="viewer" class="viewer">
        <div id="empty-state" class="empty-state">
          <h1>Welcome to Brepub</h1>
          <p>Upload an EPUB file to start your continuous reading experience.</p>
        </div>
      </div>

      <div id="settings-panel" class="settings-panel hidden">
        <div class="settings-header">
          <h3>Reader Settings</h3>
          <button id="close-settings" class="btn-icon">✕</button>
        </div>

        <div class="setting-group">
          <label>Font Family</label>
          <div class="font-options">
            <button class="font-btn active" data-font-family="'Source Serif 4', Georgia, serif">Serif</button>
            <button class="font-btn" data-font-family="'Inter', system-ui, sans-serif">Sans</button>
            <button class="font-btn" data-font-family="'JetBrains Mono', monospace">Mono</button>
            <button class="font-btn" data-font-family="'OpenDyslexic', sans-serif">Dyslexic</button>
          </div>
        </div>

        <div class="setting-group">
          <label>Font Size: <span id="font-size-val">18px</span></label>
          <input type="range" id="font-size-slider" min="12" max="32" value="18" step="1">
        </div>

        <div class="setting-group">
          <label>Line Height: <span id="line-height-val">1.6</span></label>
          <input type="range" id="line-height-slider" min="1" max="2.5" value="1.6" step="0.1">
        </div>

        <div class="setting-group">
          <label>Reader Width: <span id="reader-width-val">80%</span></label>
          <input type="range" id="reader-width-slider" min="50" max="100" value="80" step="5">
        </div>

        <div class="setting-group">
          <label>Gemini API Key</label>
          <input type="password" id="api-key-input" placeholder="Enter your API Key" class="text-input">
        </div>
      </div>
    </main>

    <div id="loading-overlay" class="loading-overlay hidden">
      <div class="loader"></div>
      <p>Loading your book...</p>
    </div>

    <!-- Selection Menu -->
    <div id="selection-menu" class="selection-menu hidden">
      <button id="btn-explain" class="btn-menu">
        <span class="icon">✨</span> Explain with AI
      </button>
    </div>

    <!-- Explanation Modal -->
    <div id="explanation-modal" class="modal-overlay hidden">
      <div class="modal-content">
        <div class="modal-header">
          <h3><span class="icon">✨</span> AI Explanation</h3>
          <button id="close-modal" class="btn-icon">✕</button>
        </div>
        <div class="modal-body">
          <div id="explanation-source" class="explanation-source hidden"></div>
          <div id="chat-messages" class="chat-messages"></div>
        </div>
        <div class="chat-input-area">
          <input type="text" id="chat-input" placeholder="Ask a follow-up question..." class="chat-input">
          <button id="btn-send" class="btn-send">
            <span class="icon">➤</span>
          </button>
        </div>
      </div>
    </div>
  </div>
  <script type="module" src="/src/main.js"></script>
</body>

</html>